<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>✨ আতর কম্বো প্যাক অর্ডার ✨</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Poppins',sans-serif; background:#fdf6f6; margin:0; padding:0; color:#333; }
.container { width:90%; max-width:900px; margin:30px auto; }
h1 { text-align:center; color:#FF1493; margin-bottom:20px; font-size:24px; }

/* Product frame */
.product-frame { 
  display:flex; align-items:center; justify-content:space-between; 
  border:3px solid #FFB6C1; border-radius:15px; padding:10px 15px; margin-bottom:15px; 
  background:#fff; box-shadow:0 10px 30px rgba(255,105,180,0.2); cursor:pointer; transition:0.3s;
}
.product-frame.selected { border:3px solid #28a745; background:#e6ffe6; }

/* bounce animation */
@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-8px); }
  60% { transform: translateY(-4px); }
}
.bounce { animation: bounce 0.5s ease; }

.product-info { display:flex; align-items:center; gap:15px; }
.product-info img { width:80px; height:80px; object-fit:cover; border-radius:8px; border:2px solid #FFC0CB; }
.product-text h3 { margin:0; font-size:16px; color:#FF1493; }
.product-text p { margin:2px 0; font-size:13px; color:#555; }
.product-text .price { font-weight:700; color:#FF4500; font-size:14px; }

/* Quantity controls */
.quantity-control { display:flex; align-items:center; gap:5px; }
.quantity-control button { padding:5px 10px; font-size:16px; font-weight:700; background:#FF69B4; color:#fff; border:none; border-radius:5px; cursor:pointer; transition:0.2s; }
.quantity-control button:hover { background:#FF1493; }
.quantity-control input { width:50px; text-align:center; font-size:16px; padding:5px; border-radius:5px; border:1px solid #ccc; }

/* Total Box */
#total-box { border:3px solid #FFB6C1; border-radius:15px; background:#fff; padding:20px; box-shadow:0 12px 35px rgba(255,105,180,0.4); margin-top:20px; }
#total-box h2 { color:#FF1493; text-align:center; margin-bottom:15px; font-size:20px; }
#total-box input[type=text], #total-box input[type=tel], #total-box textarea { width:100%; padding:8px; margin:5px 0 10px 0; border-radius:6px; border:1px solid #ccc; font-size:14px; }
#total-box div { font-size:16px; margin:5px 0; color:#333; }

/* Confirm button */
button.confirm { 
  display:block; width:100%; padding:12px; margin-top:10px; 
  background:linear-gradient(90deg,#FF69B4,#FF4500,#FFD700); 
  color:#fff; font-size:16px; font-weight:700; border:none; 
  border-radius:10px; cursor:pointer; transition:0.4s ease; 
  animation: glow 2s infinite alternate;
}
@keyframes glow { from { box-shadow:0 0 10px #FF69B4; } to { box-shadow:0 0 25px #FFD700; } }
.confirm:active { animation: bounce 0.4s ease; }

@media(max-width:600px){
  .product-frame { flex-direction:column; align-items:flex-start; }
  .quantity-control { margin-top:10px; }
}
</style>
</head>
<body>

<div class="container">
  <h1>✨ আতর কম্বো প্যাক অর্ডার করুন ✨</h1>

  <!-- Products -->
  <div class="product-frame" data-name="হালাল আতর কম্বো" data-price="590">
    <div class="product-info">
      <img src="photo11.jpg" alt="হালাল আতর কম্বো">
      <div class="product-text">
        <h3>হালাল আতর কম্বো</h3>
        <p>১২ পিস, ৩ মি.লি. বোতল</p>
        <div class="price">590৳</div>
      </div>
    </div>
    <div class="quantity-control">
      <button class="decrease">-</button>
      <input type="number" class="quantity" value="1" min="1">
      <button class="increase">+</button>
    </div>
  </div>

  <div class="product-frame" data-name="স্পেশাল আতর কম্বো" data-price="750">
    <div class="product-info">
      <img src="photo22.jpg" alt="স্পেশাল আতর কম্বো">
      <div class="product-text">
        <h3>স্পেশাল আতর কম্বো</h3>
        <p>১২ পিস, ৩ মি.লি. বোতল</p>
        <div class="price">750৳</div>
      </div>
    </div>
    <div class="quantity-control">
      <button class="decrease">-</button>
      <input type="number" class="quantity" value="1" min="1">
      <button class="increase">+</button>
    </div>
  </div>

  <!-- Total Box -->
  <div id="total-box">
    <h2>আপনার অর্ডার সারসংক্ষেপ</h2>

    <label for="customer-name">নাম</label>
    <input type="text" id="customer-name" placeholder="আপনার নাম">

    <label for="customer-mobile">মোবাইল নাম্বার</label>
    <input type="tel" id="customer-mobile" placeholder="০১৭xxxxxxxx">

    <label for="customer-address">ঠিকানা</label>
    <textarea id="customer-address" placeholder="আপনার ঠিকানা" rows="3"></textarea>

    <div>ডেলিভারি চার্জ: <span id="delivery-charge">50</span>৳</div>
    <div>মোট দাম: <span id="total-price">0</span>৳</div>
    <button class="confirm" id="confirm-order">অর্ডার কনফার্ম করুন</button>
  </div>
</div>

<script>
const deliveryCharge = 50;
const productFrames = document.querySelectorAll('.product-frame');
const totalPriceSpan = document.getElementById('total-price');
const customerName = document.getElementById('customer-name');
const customerMobile = document.getElementById('customer-mobile');
const customerAddress = document.getElementById('customer-address');

// ✅ নতুন Web App URL ব্যবহার
const scriptURL = "https://script.google.com/macros/s/AKfycbwJ5qeJeQ4Ts2Poy6zz2VsMx3QJcXjNMEZQM7Di26Q8TXW6wspiHLbOs1gclzBg03rwcw/exec";

function updateTotalPrice() {
  let total = deliveryCharge;
  productFrames.forEach(frame => {
    if (frame.classList.contains('selected')) {
      const price = parseInt(frame.dataset.price);
      const qty = parseInt(frame.querySelector('.quantity').value);
      total += price * qty;
    }
  });
  totalPriceSpan.innerText = total;
}

// Product select + auto select on quantity change + bounce
productFrames.forEach(frame => {
  frame.addEventListener('click', (e) => {
    if (!e.target.classList.contains('increase') && 
        !e.target.classList.contains('decrease') && 
        e.target.tagName !== 'INPUT') {
      frame.classList.toggle('selected');
      frame.classList.add('bounce');
      setTimeout(() => frame.classList.remove('bounce'), 500);
      updateTotalPrice();
    }
  });

  const qtyInput = frame.querySelector('.quantity');
  const incBtn = frame.querySelector('.increase');
  const decBtn = frame.querySelector('.decrease');

  incBtn.addEventListener('click', () => {
    qtyInput.value = parseInt(qtyInput.value) + 1;
    frame.classList.add('selected', 'bounce');
    setTimeout(() => frame.classList.remove('bounce'), 500);
    updateTotalPrice();
  });

  decBtn.addEventListener('click', () => {
    if (parseInt(qtyInput.value) > 1) {
      qtyInput.value = parseInt(qtyInput.value) - 1;
      frame.classList.add('selected', 'bounce');
      setTimeout(() => frame.classList.remove('bounce'), 500);
      updateTotalPrice();
    }
  });

  qtyInput.addEventListener('input', () => {
    if (parseInt(qtyInput.value) >= 1) {
      frame.classList.add('selected', 'bounce');
      setTimeout(() => frame.classList.remove('bounce'), 500);
    }
    updateTotalPrice();
  });
});

// Confirm order
document.getElementById('confirm-order').addEventListener('click', (e) => {
  e.target.classList.add('bounce');
  setTimeout(() => e.target.classList.remove('bounce'), 500);

  if (customerName.value.trim() === "" || customerMobile.value.trim() === "" || customerAddress.value.trim() === "") {
    alert("অনুগ্রহ করে নাম, মোবাইল নাম্বার এবং ঠিকানা লিখুন।");
    return;
  }

  let selectedProducts = [];
  productFrames.forEach(frame => {
    if (frame.classList.contains('selected')) {
      const qty = parseInt(frame.querySelector('.quantity').value);
      if (qty > 0) selectedProducts.push(`${frame.dataset.name}: ${qty} পিস`);
    }
  });

  if (selectedProducts.length === 0) {
    alert("অনুগ্রহ করে অন্তত একটি প্রোডাক্ট সিলেক্ট করুন।");
    return;
  }

  const orderData = {
    name: customerName.value,
    mobile: customerMobile.value,
    address: customerAddress.value,
    products: selectedProducts.join(", "),
    total: totalPriceSpan.innerText,
    delivery: deliveryCharge
  };

  fetch(scriptURL, {
    method: "POST",
    body: new URLSearchParams(orderData)
  })
  .then(res => {
    if(res.ok){
      alert("✅ আপনার অর্ডার সফলভাবে জমা হয়েছে!");
      customerName.value = "";
      customerMobile.value = "";
      customerAddress.value = "";
      productFrames.forEach(f => {
        f.classList.remove("selected");
        f.querySelector('.quantity').value = 1;
      });
      updateTotalPrice();
    } else {
      alert("❌ কিছু সমস্যা হয়েছে, আবার চেষ্টা করুন!");
    }
  })
  .catch(err => alert("❌ কিছু সমস্যা হয়েছে, আবার চেষ্টা করুন!"));
});

updateTotalPrice();
</script>

</body>
</html>
